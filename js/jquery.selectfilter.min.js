(function(c){c.fn.textfilter=function(d){var g={ondemand:false,select_id:"",debug:false,count_output:false,count_output_placeholder:""};var e=c.extend({},g,d);if(e.debug){a(this,"jQuery.TextFilter started with options [select_id = "+e.select_id+"][ondemand = "+e.ondemand+"]")}var h=new Array();c(e.select_id).find("option").each(function(){var i=new b(c(this).text(),c(this).val());h.push(i)});if(e.debug){a(this,"Original options list length: "+h.length)}e.obj=c(this);c.fn.textfilter.runFilter=function(){c(e.select_id).html("");filterText=e.obj.val();var j=0;for(var m=0;m<h.length;m++){var o=h[m];var k=o.name;var n=new RegExp(filterText,"gi");if(e.debug){a(this,"Checking pattern "+n+" against "+k)}if(n.test(k)){var l=document.createElement("option");l.value=o.val;l.innerHTML=o.name;jQuery(e.select_id).append(l);j++}}if(e.count_output){jQuery(e.count_output_placeholder).text(j)}};var f={keyup:function(i){c(this).textfilter.runFilter()}};return this.each(function(){if(!e.ondemand){c(this).keyup(f.keyup)}c(this).entersubmit()})};function a(e,d){if(window.console&&window.console.log){window.console.log(c(e).attr("id")+": "+d)}}function b(d,e){this.name=d;this.val=e}})(jQuery);